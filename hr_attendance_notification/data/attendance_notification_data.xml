<?xml version="1.0"?>
<odoo>
    <data noupdate="0">
        <!--Email template -->
        <record id="mail_template_edi_attendance_notification" model="mail.template">
            <field name="name">E-mail rappel des absences</field>
            <field name="model_id" ref="hr_attendance_notification.model_hr_attendance_send"/>
            <field name="subject">Rapport sur les absences des employés [{{ datetime.date.today()}}]</field>
            <field name="email_from">{{ user.company_id.email_formatted }}</field>
            <field name="email_to">{{ user.company_id.email_formatted }}</field>

             <field name="body_html" type="html">
<div style="font-family: 'Lucica Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF; ">

    <p>Bonjour,</p>
    <p>Je vous envoie un rapport quotidien sur les absences des employés. Veuillez trouver ci-dessus les détails de chaque absence  .</p>
    <table t-if="ctx['employee_ids']" style="width:800px;margin:0px auto;background:white;border:1px solid #e1e1e1;">
        <thead>
            <th>Employé</th>
            <th>L'origine d'absence</th>
        </thead>
        <tbody>
            <tr t-foreach="ctx['employee_ids']" t-as="employee" style="text-align: center;">
                <td><t t-esc="employee['employee']"/></td>
                <td><t t-esc="employee['state']"/></td>

            </tr>
        </tbody>
    </table>
    <t t-else="">
        <b>Aucun employé absent</b>
    </t>

    <p>Cordialement</p>

</div>
            </field>
        </record>

        <record id="mail_template_edi_retard_notification" model="mail.template">
            <field name="name">E-mail rappel des retards</field>
            <field name="model_id" ref="hr_attendance_notification.model_hr_attendance_send"/>
            <field name="subject">Rapport sur les retards des employés [{{ datetime.date.today()}}]</field>
                        <field name="email_from">{{ user.company_id.email_formatted }}</field>
            <field name="email_to">{{ user.company_id.email_formatted }}</field>

             <field name="body_html" type="html">
<div style="font-family: 'Lucica Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF; ">

    <p>Bonjour,</p>
    <p>Je vous envoie un rapport quotidien sur les retards des employés. Veuillez trouver ci-dessus les détails de chaque retard  .</p>
    <table style="width:800px;margin:0px auto;background:white;border:1px solid #e1e1e1;" t-if="ctx['retard_ids']">
        <thead>
            <tr>
               <th>Employé</th>
            <th>Heure d'arrivé</th>
            <th>Heure prévu</th>
            <th>Durée</th>
            </tr>

        </thead>
        <tbody>
            <tr t-foreach="ctx['retard_ids']" t-as="retard" style="text-align: center;">
                <td><t t-esc="retard['employee']"/></td>
                <td><t t-esc="retard['check_in']"/></td>
                <td><t t-esc="retard['origin_in']"/>
                <t t-if="retard['marge']">
                    +(<t t-esc="retard['marge']"/> min)
                </t>
                </td>
                <td><t t-esc="retard['retard']"/></td>
            </tr>
        </tbody>
    </table>
    <t t-else="">
        <b >Aucun retard</b>
    </t>


    <p>Cordialement</p>

</div>
            </field>
        </record>
    </data>
</odoo>